System.register(["./index-legacy-CvNS6mQ9.js","./index-legacy-QhnTqiEL.js","./index.esm2017-legacy-AEcz-JJo.js"],(function(e,l){"use strict";var n,a,t,i,u,o,s,c,d,r,m,f,v,p,g,_,h,C,x,y,k,w,E,D,b,j,S,$,A,I,P,B,F,J,K,L,M;return{setters:[e=>{n=e.r,a=e.M,t=e.N,i=e.A,u=e.c,o=e.w,s=e.u,c=e.o,d=e.b,r=e.B,m=e.C,f=e.D,v=e.h,p=e.I,g=e.O,_=e.F,h=e.J,C=e.K,x=e.k,y=e.e,k=e.g,w=e.d,E=e.t,D=e.j,b=e.f,j=e.P,S=e.Q,$=e.R,A=e.n,I=e.S},e=>{P=e.c,B=e.d,F=e.t},e=>{J=e.g,K=e.r,L=e.o,M=e.a}],execute:function(){var l=document.createElement("style");l.textContent="ion-item-sliding{margin-bottom:1px}ion-item-option{width:70px}ion-item[slot]{--padding-start: 16px;--inner-padding-end: 16px}\n",document.head.appendChild(l);const N={key:0};e("default",{__name:"Tab2Page",setup(e){const l=n([]),O=a({}),Q=t((()=>{const e={};return l.value.forEach((l=>{const n=l.usuario||"Sin usuario";e[n]||(e[n]={claves:[]},O[n]=!1),e[n].claves.push({id:l.id,timestamp:l.timestamp||Date.now()})})),e})),R=e=>{const n=J(),a=K(n,`claves/${e}`);M(a).then((()=>{console.log(`Clave ${e} eliminada`),l.value=l.value.filter((l=>l.id!==e))})).catch((e=>{console.error("Error al eliminar:",e)}))};return i((()=>{const e=J(),n=K(e,"claves/");L(n,(e=>{const n=[];e.forEach((e=>{n.push({id:e.key,usuario:e.val().usuario||"",timestamp:e.val().timestamp||Date.now()})})),l.value=n}))})),(e,l)=>(c(),u(s(A),null,{default:o((()=>[d(s(r),null,{default:o((()=>[d(s(m),null,{default:o((()=>[d(s(f),null,{default:o((()=>l[0]||(l[0]=[v("Administración de Claves")]))),_:1})])),_:1})])),_:1}),d(s(p),{fullscreen:!0},{default:o((()=>[d(s(g),null,{default:o((()=>[(c(!0),_(h,null,C(Q.value,((e,l)=>(c(),_("div",{key:l},[d(s(y),null,{default:o((()=>[d(s(k),null,{default:o((()=>[w("h2",null,E(l||"Usuario no definido"),1),w("p",null,E(e.claves.length)+" claves",1)])),_:2},1024),d(s(D),{slot:"end",fill:"clear",onClick:e=>(e=>{O[e]=!O[e]})(l)},{default:o((()=>[d(s(b),{icon:O[l]?s(P):s(B)},null,8,["icon"])])),_:2},1032,["onClick"])])),_:2},1024),O[l]?(c(),_("div",N,[(c(!0),_(h,null,C(e.claves,(e=>(c(),u(s(j),{key:e.id},{default:o((()=>[d(s(y),null,{default:o((()=>[d(s(k),null,{default:o((()=>{return[w("p",null,"ID: "+E(e.id),1),w("p",null,"Creado: "+E((l=e.timestamp,new Date(l).toLocaleString())),1)];var l})),_:2},1024)])),_:2},1024),d(s(S),{side:"end"},{default:o((()=>[d(s($),{color:"danger",onClick:n=>(async(e,l)=>{const n=await I.create({header:"Confirmar eliminación",message:`¿Eliminar la clave ${e} de ${l}?`,buttons:[{text:"Cancelar",role:"cancel"},{text:"Eliminar",handler:()=>R(e)}]});await n.present()})(e.id,l)},{default:o((()=>[d(s(b),{slot:"icon-only",icon:s(F)},null,8,["icon"])])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1024)))),128))])):x("",!0)])))),128))])),_:1})])),_:1})])),_:1}))}})}}}));
