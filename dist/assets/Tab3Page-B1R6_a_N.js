import{r as o,c as h,w as t,u as a,o as x,b as s,B as D,C as T,D as B,h as v,I as V,d as k,O as w,e as A,g as $,i as y,j as N,U as P,n as U,p as S}from"./index-CcQcy7fF.js";import{g as j,p as E,r as L}from"./index.esm2017-DCJN5aiX.js";import{_ as M}from"./_plugin-vue_export-helper-DlAUqK2U.js";const F={class:"form-container"},H={__name:"Tab3Page",setup(O){const d=o(1),l=o(""),n=o(""),u=o(""),r=o(!1),p=["Continuar"],b=async()=>{const e=S().currentUser;if(!e){l.value="Error de autenticación",n.value="Usuario no autenticado",u.value="Debes iniciar sesión para agregar claves.",r.value=!0;return}const i=e.email||e.uid||"usuario_desconocido",_=new Intl.DateTimeFormat("es-MX",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}).format(new Date),C=j(),f=[];let m=0,g=0;for(let c=0;c<d.value;c++)f.push(E(L(C,"claves/"),{status:"Disponible",usuario:i,fechaCreacion:_}));(await Promise.allSettled(f)).forEach(c=>{c.status==="fulfilled"?m++:g++}),g>0?(l.value="Resultado parcial",n.value="Algunas claves no se agregaron",u.value="Se agregaron ".concat(m," claves con éxito, ").concat(g," fallaron.")):(l.value="Claves agregadas",n.value="Todas las claves agregadas con éxito",u.value="Se agregaron ".concat(m," claves correctamente.")),r.value=!0};return(I,e)=>(x(),h(a(U),null,{default:t(()=>[s(a(D),null,{default:t(()=>[s(a(T),null,{default:t(()=>[s(a(B),null,{default:t(()=>e[2]||(e[2]=[v("Agregar Claves")])),_:1})]),_:1})]),_:1}),s(a(V),null,{default:t(()=>[k("div",F,[s(a(w),{lines:"none"},{default:t(()=>[s(a(A),{class:"custom-item"},{default:t(()=>[s(a($),{position:"stacked",class:"label-spacing"},{default:t(()=>e[3]||(e[3]=[v(" Número de claves a agregar ")])),_:1}),s(a(y),{modelValue:d.value,"onUpdate:modelValue":e[0]||(e[0]=i=>d.value=i),modelModifiers:{number:!0},type:"number",min:"1",class:"custom-input"},null,8,["modelValue"])]),_:1})]),_:1}),s(a(N),{expand:"block",class:"custom-button",onClick:b},{default:t(()=>e[4]||(e[4]=[v(" Agregar Claves ")])),_:1})]),s(a(P),{"is-open":r.value,header:l.value,"sub-header":n.value,message:u.value,buttons:p,onDidDismiss:e[1]||(e[1]=i=>r.value=!1)},null,8,["is-open","header","sub-header","message"])]),_:1})]),_:1}))}},G=M(H,[["__scopeId","data-v-bc2928e4"]]);export{G as default};
